<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cẩm nang chính quyền địa phương cấp xã – online</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* General Styling */
        :root {
            --primary-color: #0056b3;
            --secondary-color: #007bff;
            --header-bg: #0d47a1; /* Dark blue for header */
            --background-color: #f4f7fa;
            --text-color: #333;
            --card-bg: #ffffff;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Landing Page Styling */
        #landing-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            position: relative;
            box-sizing: border-box;
        }

        .issuing-authority {
            position: absolute;
            top: 30px;
            left: 0;
            right: 0;
            font-size: 1.2rem;
            font-weight: bold;
            color: red;
        }
        
        .title-container {
            margin-bottom: 40px;
            margin-top: 60px; /* Push content down from the authority name */
        }

        .title-main {
            font-size: 3.2rem;
            margin: 0;
            color: var(--primary-color);
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.1em; /* Wider font */
        }
        
        .title-sub {
            font-size: 1.5rem;
            margin: 5px 0 0 0;
            color: var(--primary-color);
            text-transform: uppercase;
            font-weight: bold; /* Added bold */
            letter-spacing: -0.02em;
        }

        .title-tag {
            font-size: 1.1rem; /* Slightly larger */
            color: var(--text-color);
            font-weight: bold; /* Added bold */
            margin-top: 8px;
        }

        .button-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            color: white;
        }

        .btn-main-action {
            background-color: var(--header-bg); /* Dark blue */
        }
        .btn-main-action:hover { background-color: #0b3a8a; }

        .btn-secondary-action {
            background-color: var(--secondary-color);
        }
        .btn-secondary-action:hover { background-color: var(--primary-color); }

        #landing-page footer {
            width: 100%;
            position: absolute;
            bottom: 20px;
            left: 0;
            font-size: 0.9rem;
            color: #555;
        }

        /* Modal (Popup) Styling */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: #fefefe; margin: 10% auto; padding: 30px; border: 1px solid #888; width: 80%; max-width: 700px; border-radius: 8px; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3); animation: slide-down 0.5s; }
        @keyframes slide-down { from {transform: translateY(-50px); opacity: 0;} to {transform: translateY(0); opacity: 1;} }
        .close-btn { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close-btn:hover, .close-btn:focus { color: black; }
        .modal h2 { margin-top: 0; color: var(--primary-color); }

        /* Handbook Content Page Styling */
        #handbook-content { display: none; flex-direction: column; }
        #handbook-content header { background-color: var(--header-bg); color: var(--header-text); padding: 15px 20px; text-align: center; font-size: 1.2rem; font-weight: bold; box-shadow: var(--shadow); position: sticky; top: 0; z-index: 999; display: flex; justify-content: center; align-items: center; }
        .home-btn { position: absolute; left: 15px; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
        main { padding: 20px; }
        
        /* Main Menu Layout */
        .desktop-layout { display: flex; flex-direction: column; align-items: center; }
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; justify-items: center; width: 100%; }
        .menu-card { background-color: var(--card-bg); border-radius: 8px; box-shadow: var(--shadow); padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s ease; width: 100%; max-width: 320px; }
        .menu-card:hover { transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); background-color: #e3f2fd; }
        .menu-card .part-number { font-weight: bold; color: var(--header-bg); margin-bottom: 5px; font-size: 1.1rem; }
        .menu-card i { font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 15px; }
        .menu-card h3 { margin: 0; font-size: 1.1rem; color: var(--primary-color); }
        .image-container { display: none; } /* Hide by default, show on desktop */

        /* Desktop specific layout */
        @media (min-width: 1024px) {
            .desktop-layout { flex-direction: row; align-items: flex-start; gap: 30px; }
            .menu-container { flex: 1; }
            .menu-grid { grid-template-columns: repeat(2, 1fr); }
            .image-container {
                flex: 1;
                display: flex;
                justify-content: center;
                align-items: center;
                padding-top: 20px;
            }
            .image-container img {
                max-width: 100%;
                height: auto;
                border-radius: 8px;
                box-shadow: var(--shadow);
            }
        }

        /* QR Code section */
        .qrcode-container { text-align: center; margin: 30px 0; padding: 20px; background-color: var(--card-bg); border-radius: 8px; box-shadow: var(--shadow); display: inline-block; }
        .qrcode-container img { max-width: 150px; height: auto; }
        .qrcode-container p { margin: 10px 0 0 0; font-weight: bold; color: var(--primary-color); }

        /* Content Section Styling */
        .content-section { display: none; background-color: var(--card-bg); padding: 25px; border-radius: 8px; box-shadow: var(--shadow); margin-top: 20px; animation: fade-in 0.5s; }
        @keyframes fade-in { from {opacity: 0;} to {opacity: 1;} }
        .content-section h2 { color: var(--primary-color); border-bottom: 2px solid var(--secondary-color); padding-bottom: 10px; margin-top: 0; }
        .back-btn { margin-bottom: 20px; background-color: var(--secondary-color); }
        .back-btn:hover { background-color: var(--primary-color); }
        .download-pdf { display: block; margin: 20px auto; text-align: center; width: fit-content; background-color: var(--secondary-color); }
        .download-pdf:hover { background-color: var(--primary-color); }

        /* Infographic & Accordion Styling */
        .infographic-list { list-style: none; padding-left: 0; }
        .infographic-list li { background-color: #eef4fb; margin-bottom: 10px; padding: 15px; border-left: 5px solid var(--secondary-color); border-radius: 4px; }
        .infographic-list li strong { color: var(--primary-color); }
        
        .accordion { background-color: #f1f1f1; color: #444; cursor: pointer; padding: 18px; width: 100%; border: none; text-align: left; outline: none; font-size: 1.1rem; font-weight: bold; transition: background-color 0.4s; margin-top: 10px; border-radius: 4px; }
        .accordion:hover, .accordion.active { background-color: #d4eaf7; }
        .accordion:after { content: '\\f078'; font-family: "Font Awesome 6 Free"; font-weight: 900; color: #777; float: right; margin-left: 5px; transition: transform 0.2s; }
        .accordion.active:after { transform: rotate(180deg); }
        .panel { padding: 0 18px; background-color: white; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; border: 1px solid #ddd; border-top: none; }
        .panel p, .panel ul { padding: 15px 0; }
        
        /* Abbreviation Table */
        .abbreviation-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .abbreviation-table th, .abbreviation-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        .abbreviation-table th { background-color: var(--primary-color); color: white; }
        .abbreviation-table tr:nth-child(even) { background-color: #f2f2f2; }
        
        /* Responsive Adjustments */
        @media (max-width: 600px) {
            .title-main { font-size: 2.2rem; letter-spacing: 0.05em; }
            .title-sub { font-size: 1.1rem; }
            #handbook-content header { font-size: 1rem; padding-left: 50px; padding-right: 50px; }
        }

    </style>
</head>
<body>

    <div id="landing-page">
        <div class="issuing-authority">BỘ NỘI VỤ</div>
        <div class="title-container">
            <div class="title-main">Cẩm nang</div>
            <div class="title-sub">Chính quyền địa phương 2 cấp</div>
            <div class="title-tag">(Bản online V.25.01)</div>
        </div>
        <div class="button-container">
            <button class="btn btn-secondary-action" onclick="openModal('modal-intro')">Giới thiệu</button>
            <button class="btn btn-main-action" onclick="enterHandbook()">Cẩm nang</button>
            <button class="btn btn-secondary-action" onclick="openModal('modal-authors')">Tác giả</button>
        </div>
        <footer>© 2025 Bản quyền thuộc về Bộ Nội vụ</footer>
    </div>
    
    <!-- Modals are unchanged, keeping them collapsed for brevity -->
    <div id="modal-intro" class="modal">...</div> <div id="modal-authors" class="modal">...</div>

    <div id="handbook-content">
        <header>
            <button class="home-btn" onclick="goHome()" title="Về trang chủ"><i class="fas fa-home"></i></button>
            Cẩm nang Chính quyền địa phương 2 cấp
        </header>

        <main>
            <div id="main-menu" class="view">
                <div class="desktop-layout">
                    <div class="menu-container">
                        <div class="menu-grid">
                            <div class="menu-card" onclick="showView('view-part1')"><p class="part-number">Phần 1.</p><i class="fas fa-landmark"></i><h3>Những vấn đề chung</h3></div>
                            <div class="menu-card" onclick="showView('view-part2')"><p class="part-number">Phần 2.</p><i class="fas fa-users"></i><h3>Hội đồng nhân dân cấp xã</h3></div>
                            <div class="menu-card" onclick="showView('view-part3')"><p class="part-number">Phần 3.</p><i class="fas fa-building-user"></i><h3>Ủy ban nhân dân cấp xã</h3></div>
                            <div class="menu-card" onclick="showView('view-part4')"><p class="part-number">Phần 4.</p><i class="fas fa-exchange-alt"></i><h3>Một số quy định chuyển tiếp</h3></div>
                            <div class="menu-card" onclick="showView('view-part5')"><p class="part-number">Phần 5.</p><i class="fas fa-question-circle"></i><h3>Câu hỏi thường gặp</h3></div>
                            <div class="menu-card" onclick="showView('view-part6')"><p class="part-number">Phần 6.</p><i class="fas fa-paperclip"></i><h3>Phụ lục</h3></div>
                            <div class="menu-card" onclick="showView('view-abbreviations')"><i class="fas fa-book"></i><h3>Tra cứu chữ viết tắt</h3></div>
                        </div>
                    </div>
                    <div class="image-container">
                        <img src="https://i.imgur.com/gK24j2T.jpeg" alt="Mô hình chính quyền địa phương 2 cấp">
                    </div>
                </div>

                 <div style="text-align: center; margin-top: 30px;">
                    <div class="qrcode-container">
                        <img src="https://i.imgur.com/G5g204g.jpeg" alt="QR Code Phụ lục">
                        <p>Phụ lục Phân cấp, phân quyền của các Bộ</p>
                    </div>
                </div>
                 <a href="cam_nang.pdf" download class="btn download-pdf"><i class="fas fa-download"></i> Tải về Cẩm nang (PDF)</a>
            </div>

            <!-- Content Views (with fixed accordion JS) -->
             <div id="view-part1" class="content-section view">
                <button class="btn back-btn" onclick="showView('main-menu')"><i class="fas fa-arrow-left"></i> Quay lại</button>
                <h2>P1. Những vấn đề chung</h2>
                <button class="accordion">1. Tổ chức đơn vị hành chính cấp xã</button>
                <div class="panel">
                    <p>Theo quy định tại Điều 1 Luật Tổ chức CQĐP năm 2025, đơn vị hành chính cấp xã gồm có xã, phường, đặc khu trực thuộc cấp tỉnh. Trong đó:</p>
                    <ul class="infographic-list">
                        <li><strong>Xã:</strong> là đơn vị hành chính ở nông thôn.</li>
                        <li><strong>Phường:</strong> là đơn vị hành chính ở đô thị.</li>
                        <li><strong>Đặc khu:</strong> là đơn vị hành chính ở một số hải đảo có vị trí quan trọng được thành lập phù hợp với điều kiện địa lý, tự nhiên, đặc điểm dân cư và yêu cầu phát triển kinh tế - xã hội, bảo đảm quốc phòng, an ninh.</li>
                    </ul>
                     <p>Tính đến ngày 01/7/2025 (ngày bắt đầu thực hiện mô hình tổ chức CQĐP 02 cấp), cả nước có 3.321 đơn vị hành chính cấp xã, gồm: 2.621 xã, 687 phường và 13 đặc khu.</p>
                </div>
                <button class="accordion">2. Tổ chức CQĐP cấp xã</button>
                <div class="panel"><p>Nội dung chi tiết...</p></div>
                <button class="accordion">3. Nguyên tắc tổ chức và hoạt động của CQĐP</button>
                <div class="panel"><p>Nội dung chi tiết...</p></div>
                <button class="accordion">4. Vị trí, chức năng của HĐND</button>
                <div class="panel"><p>Nội dung chi tiết...</p></div>
                <button class="accordion">5. Vị trí, chức năng của UBND xã</button>
                <div class="panel"><p>Nội dung chi tiết...</p></div>
                <button class="accordion">6. Đại biểu HĐND cấp xã</button>
                <div class="panel"><p>Nội dung chi tiết...</p></div>
            </div>
            
            <!-- Other content views are placeholders -->
            <div id="view-part2" class="content-section view">...</div>
            <div id="view-part3" class="content-section view">...</div>
            <div id="view-part4" class="content-section view">...</div>
            <div id="view-part5" class="content-section view">...</div>
            <div id="view-part6" class="content-section view">...</div>
            <div id="view-abbreviations" class="content-section view">...</div>

        </main>
    </div>

    <script>
        function openModal(modalId) { document.getElementById(modalId).style.display = "block"; }
        function closeModal(modalId) { document.getElementById(modalId).style.display = "none"; }
        window.onclick = function(event) { if (event.target.classList.contains('modal')) event.target.style.display = "none"; }
        
        function enterHandbook() {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('handbook-content').style.display = 'flex';
            showView('main-menu');
        }
        
        function goHome() {
            document.getElementById('handbook-content').style.display = 'none';
            document.getElementById('landing-page').style.display = 'flex';
        }

        function showView(viewId) {
            document.querySelectorAll('.view').forEach(view => { view.style.display = 'none'; });
            const targetView = document.getElementById(viewId);
            if (targetView) targetView.style.display = 'block';
        }
        
        // This function attaches event listeners for accordions. It's crucial for interactivity.
        function setupAccordions() {
             document.querySelectorAll(".accordion").forEach(button => {
                button.addEventListener("click", () => {
                    button.classList.toggle("active");
                    const panel = button.nextElementSibling;
                    if (panel.style.maxHeight) {
                        panel.style.maxHeight = null;
                    } else {
                        panel.style.maxHeight = panel.scrollHeight + "px";
                    }
                });
            });
        }

        document.addEventListener("DOMContentLoaded", function() {
            // Replace abbreviations first, before attaching any event listeners
            const contentDiv = document.getElementById('handbook-content');
            let contentHTML = contentDiv.innerHTML;
            const replacements = {
                'Chính quyền địa phương 2 cấp': 'CQĐP 2 cấp',
                'Chính quyền địa phương': 'CQĐP',
                'Hội đồng nhân dân': 'HĐND',
                'Uỷ ban nhân dân': 'UBND',
                'Ủy ban nhân dân': 'UBND',
                'Phân cấp, phân quyền': 'PCPQ',
                'Phân định thẩm quyền': 'PĐTQ'
            };
            for (const [full, abbr] of Object.entries(replacements)) {
                const regex = new RegExp(`\\b${full}\\b`, 'g');
                contentHTML = contentHTML.replace(regex, abbr);
            }
            contentDiv.innerHTML = contentHTML;
            
            // NOW, attach the event listeners to the newly generated HTML content
            setupAccordions();
        });
    </script>
</body>
</html>
